# 1.3.3 Уровни модели OSI

![](image001.jpg)
<!-- {#Рисунок 2 width="436" height="543 -->
<hr>

# Физический уровень

Физический уровень <i style="color: red">имеет дело с передачей битов по физическимканалам связи</i>, таким, например, как коаксиальный кабель, витая пара, оптоволоконный кабель или цифровой
территориальный канал. К этому уровню имеют отношениехарактеристики физических сред передачи
данных, такие как полоса пропускания,помехозащищенность, волновое
сопротивление и другие. На этом же уровне определяются характеристики электрических
сигналов, передающих дискретную информацию, например, крутизна фронтов
импульсов, уровни напряжения или тока передаваемого сигнала, тип кодирования, скорость передачи сигналов
Кроме этого, здесь стандартизуются типы разъемов и назначение каждого контакта.

                                                      
<!-- :---------------------------:|:-------------------------: -->

![](image002.jpg)![](image003.jpg)

<!-- width="301" height="206 
width: 296; height: 202; -->


<!-- :---------------------------:|:-------------------------: -->

![](image004.jpg)![](image005.jpg)

<!-- width="326" height="201 
width="301" height="210 -->


Функции физического уровня реализуются во всех устройствах,
подключенных к сети. <i style="color: red">Со стороны компьютера функции физического уровня выполняются сетевым адаптером или последовательным портом</i>.

Примером протокола физического уровня может служить спецификация l0-Base-T
технологии Ethernet, которая определяет в качестве используемого кабеля
неэкранированную витую пару категории 3 с волновым сопротивлением 100 Ом, разъем
RJ-45, максимальную длину физического сегмента 100 метров, манчестерский код для
представления данных в кабеле, а также некоторые другие характеристики среды и
электрических сигналов.

# Канальный уровень

На физическом уровне просто пересылаются биты. При этом не учитывается, что
в некоторых сетях, в которых линии связи используются (разделяются) попеременно
несколькими парами взаимодействующих компьютеров, физическая среда передачи
может быть занята. <i style="color: red">Поэтому одной из задач канального уровня (Data Link layer)
является проверка доступности среды передачи.</i>

<!-- :---------------------------:|:-------------------------: -->

![](image006.jpg)![](image007.jpg)

<!-- <img src="image006.jpg" width="315" height="266> <img width="311" height="226> -->

![](image008.jpg)

<!-- <img src="image008.jpg" width="507" height="333"> -->

Другой задачей канального уровня является <i style="color: red">реализация механизмов обнаружения
и коррекции ошибок. Для этого на канальном уровне биты группируются в наборы,
называемые кадрами (frames).</i> Канальный уровень обеспечивает корректность передачи
каждого кадра, помещая специальную последовательность бит в начало и конец каждого
кадра, для его выделения, а также <i style="color: red">вычисляет контрольную сумму</i>, обрабатывая все байты
кадра определенным способом и добавляя контрольную сумму к кадру. Когда кадр
приходит по сети, получатель снова вычисляет контрольную сумму полученных данных и
<i style="color: red">сравнивает результат с контрольной суммой из кадра</i>. Если они совпадают, кадр считается
правильным и принимается. Если же контрольные суммы не совпадают, то фиксируется
ошибка. Канальный уровень <i style="color: red">может не только обнаруживать ошибки, но и исправлять
их за счет повторной передачи поврежденных кадров.</i> Необходимо отметить, что
функция исправления ошибок не является обязательной для канального уровня, поэтому в
некоторых протоколах этого уровня она отсутствует.

В протоколах канального уровня, используемых в локальных сетях, заложена
определенная структура связей между компьютерами и способы их адресации. Хотя
канальный уровень и обеспечивает доставку кадра между любыми двумя узлами
локальной сети, он это делает только в сети с совершенно определенной топологией
связей, именно той топологией, для которой он был разработан. К таким типовым
топологиям, поддерживаемым протоколами канального уровня локальных сетей,
относятся общая шина, кольцо и звезда, а также структуры, полученные из них с
помощью мостов и коммутаторов.

![](image009.jpg)
<!-- width="526" height="373 -->

В локальных сетях протоколы канального уровня используются компьютерами,
мостами, коммутаторами и маршрутизаторами.

![](image010.jpg)
<!-- width="503" height="303 -->

<i style="color: red">В компьютерах</i> функции канального уровня реализуются совместными усилиями
сетевых адаптеров и их драйверов.

<i style="color: red">В глобальных сетях</i>, которые редко обладают регулярной топологией, канальный
уровень часто обеспечивает обмен сообщениями только между двумя соседними
компьютерами, соединенными индивидуальной линией связи.

![](image011.jpg)
<!-- width="467" height="352 -->

В целом канальный уровень представляет собой весьма мощный и законченный
набор функций по пересылке сообщений между узлами сети. В некоторых случаях
протоколы канального уровня оказываются самодостаточными транспортными
средствами и могут допускать работу поверх них непосредственно протоколов
прикладного уровня или приложений, без привлечения средств сетевого и транспортного
уровней.

Тем не менее для обеспечения качественной транспортировки сообщений в сетях
любых топологий и технологий функций канального уровня оказывается недостаточно,
поэтому в модели OSI решение этой задачи возлагается на два следующих уровня —
сетевой и транспортный.

# **Сетевой уровень**

<i style="color: red;">Сетевой уровень (Network layer) служит для образования единой транспортной
системы, объединяющей несколько сетей</i>, причем эти сети могут использовать
совершенно различные принципы передачи сообщений между конечными узлами и
обладать произвольной структурой связей. Функции сетевого уровня достаточно
разнообразны. Начнем их рассмотрение на примере объединения локальных сетей.

![](image012.jpg)
<!-- width="482" height="305]{ -->

Протоколы канального уровня локальных сетей обеспечивают доставку данных
между любыми узлами только в сети с соответствующей типовой топологией, например,
топологией иерархической звезды. Это очень жесткое ограничение, которое не позволяет
строить сети с развитой структурой, например, сети, объединяющие несколько сетей
предприятия в единую сеть, или высоконадежные сети, в которых существуют
избыточные связи между узлами. Можно было бы усложнять протоколы канального
уровня для поддержания петлевидных избыточных связей, но принцип разделения
обязанностей между уровнями приводит к другому решению.

<i>Чтобы с одной стороны сохранить простоту процедур передачи данных для
типовых топологий, а с другой допустить использование произвольных топологий,
вводится дополнительный сетевой уровень.</i>

![](image013.jpg)
<!-- width="324" height="261 -->

На сетевом уровне сам термин сеть наделяют специфическим значением. В данном
случае под сетью понимается <i>совокупность компьютеров, соединенных между собой в
соответствии с одной из стандартных типовых топологий и использующих для передачи
данных один из протоколов канального уровня, определенный</i> для этой топологии.

<i style="color: red">Внутри сети доставка данных обеспечивается соответствующим канальным
уровнем, а вот доставкой данных между сетями занимается сетевой уровень</i>, который и
поддерживает возможность правильного выбора маршрута передачи сообщения даже в
том случае, когда структура связей между составляющими сетями имеет характер,
отличный от принятого в протоколах канального уровня. Сети соединяются между собой
специальными устройствами, называемыми маршрутизаторами. Маршрутизатор —
это устройство, которое собирает информацию о топологии межсетевых соединений
и на ее основании пересылает пакеты сетевого уровня в сеть назначения.

![](image014.jpg)
<!-- width="467" height="299]{ -->

Чтобы передать сообщение от отправителя, находящегося в одной сети,
получателю, находящемуся в другой сети, нужно совершить некоторое количество
транзитных передач между сетями, или <i style="color: red">хопов (от hop — прыжок), каждый раз выбирая
подходящий маршрут. Таким образом, маршрут представляет собой
последовательность маршрутизаторов, через которые проходит пакет.</i>

![](image015.jpg)
<!-- width="173" height="159]{ -->

<i style="color: red">Проблема выбора наилучшего пути называется маршрутизацией</i>, и ее решение
является одной из главных задач сетевого уровня. Эта проблема осложняется тем, что
самый короткий путь не всегда самый лучший. Часто критерием при выборе маршрута
является время передачи данных по этому маршруту; оно зависит от пропускной
способности каналов связи и интенсивности трафика, которая может изменяться с
течением времени. <i style="color: red">Некоторые алгоритмы маршрутизации пытаются приспособиться к
изменению нагрузки, в то время как другие принимают решения на основе средних
показателей за длительное время.</i > Выбор маршрута может осуществляться и по другим
критериям, например, надежности передачи.

В общем случае функции сетевого уровня шире, чем функции передачи сообщений
по связям с нестандартной структурой, которые мы сейчас рассмотрели на примере
объединения нескольких локальных сетей. <i style="color: red">Сетевой уровень решает также задачи
согласования разных технологий, упрощения адресации в крупных сетях и создания
надежных и гибких барьеров на пути нежелательного трафика между сетями.</i>

<i style="color: red">Сообщения сетевого уровня принято называть пакетами (packets).</i> При
организации доставки пакетов на сетевом уровне используется понятие «номер сети». В
этом случае адрес получателя состоит из старшей части — номера сети и младшей —
номера узла в этой сети. Все узлы одной сети должны иметь одну и ту же старшую часть
адреса, поэтому термину «сеть» на сетевом уровне можно дать и другое, более
формальное определение: <i style="color: red">сеть — это совокупность узлов, сетевой адрес которых
содержит один и тот же номер сети.</i>

На сетевом уровне определяются два вида протоколов. <i style="color: red">Первый вид — сетевые
протоколы (routed protocols) — реализуют продвижение пакетов через сеть.</i> Именно эти
протоколы обычно имеют в виду, когда говорят о протоколах сетевого уровня. <i style="color: red">Однако
часто к сетевому уровню относят и другой вид протоколов, называемых протоколами
обмена маршрутной информацией или просто протоколами маршрутизации (routing
protocols). С помощью этих протоколов маршрутизаторы собирают информацию о
топологии межсетевых соединений.</i> Протоколы сетевого уровня реализуются про-
граммными модулями операционной системы, а также программными и аппаратными
средствами маршрутизаторов.

<i style="color: red">На сетевом уровне работают протоколы еще одного типа, которые отвечают за
отображение адреса узла, используемого на сетевом уровне, в локальный адрес сети.</i>
Такие протоколы часто называют протоколами разрешения адресов — Address Resolution
Protocol, ARP. Иногда их относят не к сетевому уровню, а к канальному, хотя тонкости
классификации не изменяют их сути.

![](image016.jpg)
<!-- width="453" height="332 -->

Примерами протоколов сетевого уровня являются протокол межсетевого
взаимодействия IP стека TCP/IP и протокол межсетевого обмена пакетами IPX стека
Novell.

# **Транспортный уровень**

На пути от отправителя к получателю пакеты могут быть искажены или утеряны.
Хотя некоторые приложения имеют собственные средства обработки ошибок, существуют
и такие, которые предпочитают сразу иметь дело с надежным соединением.

<i style="color: red">Транспортный уровень (Transport layer) обеспечивает приложениям или верхним
уровням стека — прикладному и сеансовому — передачу данных с той степенью
надежности, которая им требуется.</i>

![](image017.jpg)
<!-- width="430" height="326 -->

Модель OSI определяет пять классов сервиса, предоставляемых транспортным
уровнем. Эти виды сервиса отличаются качеством пред ставляемых услуг:

* срочностью,
* возможностью восстановления прерванной связи
* наличием средств мультиплексирования нескольких соединений между различными прикладными протоколами через общий транспортный протокол,
* а главное — способностью к обнаружению и исправлению ошибок передачи, таких как искажение, потеря и дублирование пакетов.

![](image018.jpg)
<!-- width="432" height="235]{ -->

Выбор класса сервиса транспортного уровня определяется, с одной стороны, тем, в
какой степени задача обеспечения надежности решается самими приложениями и
протоколами более высоких, чем транспортный, уровней, а с другой стороны, этот выбор
зависит от того, насколько надежной является система транспортировки данных в сети,
обеспечиваемая уровнями, расположенными ниже транспортного — сетевым, канальным
и физическим.

Так, например, если качество каналов передачи связи очень высокое и вероятность
возникновения ошибок, не обнаруженных протоколами более низких уровней, невелика,
то разумно воспользоваться одним из облегченных сервисов транспортного уровня, не
обремененных многочисленными проверками, квитированием <i style="color: red">(квитировать -
подтверждение приёма-передачи структурной единицы информации)</i> и другими
приемами повышения надежности. Если же транспортные средства нижних уровней
изначально очень ненадежны, то целесообразно обратиться к наиболее развитому сервису
транспортного уровня, который работает, используя максимум средств для обнаружения и
устранения ошибок, — с помощью предварительного установления логического
соединения, контроля доставки сообщений по контрольным суммам и циклической
нумерации пакетов, установления тайм-аутов доставки и т.п.

<i style="color: red">Как правило, все протоколы, начиная с транспортного уровня и выше,
реализуются программными средствами конечных узлов сети — компонентами их
сетевых операционных систем.</i> В качестве примера транспортных протоколов можно
привести протоколы TCP и UDP стека TCP/IP и протокол SPX стека Novell.

<i style="color: red">Протоколы нижних четырех уровней обобщенно называют сетевым
транспортом или транспортной подсистемой</i>, так как они полностью решают задачу
транспортировки сообщений с заданным уровнем качества в составных сетях с
произвольной топологией и различными технологиями. Остальные три верхних уровня
решают задачи предоставления прикладных сервисов на основании имеющейся
транспортной подсистемы.

# **Сеансовый уровень**

Сеансовый уровень (Session layer) обеспечивает управление диалогом: фиксирует,
какая из сторон является активной в настоящий момент, предоставляет средства
синхронизации.

![](image019.jpg)
<!-- width="501" height="320]{ -->

Последние позволяют вставлять контрольные точки в длинные передачи, чтобы в
случае отказа можно было вернуться назад к последней контрольной точке, а не начинать
все с начала. На практике немногие приложения используют сеансовый уровень, и он
редко реализуется в виде отдельных протоколов, хотя функции этого уровня часто
объединяют с функциями прикладного уровня и реализуют в одном протоколе.

# **Представительный уровень**

Представительный уровень (Presentation layer) имеет дело с формой
представления передаваемой по сети информации, не меняя при этом ее содержания. За
счет уровня представления информация, передаваемая прикладным уровнем одной
системы, всегда понятна прикладному уровню другой системы. С помощью средств
данного уровня протоколы прикладных уровней могут преодолеть синтаксические
различия в представлении данных или же различия в кодах символов, например, кодов
ASCII и EBCDIC. <i style="color: red">На этом уровне может выполняться шифрование и дешифрование
данных</i>, благодаря которому секретность обмена данными обеспечивается сразу для всех
прикладных служб.

![](image020.jpg)
<!-- width="444" height="311]{ -->

![](image021.jpg)
<!-- width="447" height="338]{ -->

Примером такого протокола является протокол Secure Socket Layer (SSL), который
обеспечивает секретный обмен сообщениями для протоколов прикладного уровня стека
TCP/IP.

# **Прикладной уровень**

Прикладной уровень ( Application layer) — это в действительности просто набор
разнообразных протоколов, с помощью которых пользователи сети получают доступ к
разделяемым ресурсам, таким как файлы, принтеры или гипертекстовые Web-страницы, а
также организуют свою совместную работу, например, с помощью протокола электронной
почты. Единица данных, которой оперирует прикладной уровень, обычно называется
сообщением (message).

![](image022.jpg)
<!-- width="459" height="335 -->

Существует очень большое разнообразие служб прикладного уровня. Приведем в
качестве примера хотя бы несколько наиболее распространенных реализации файловых
служб: NCP в операционной системе Novell NetWare, SMB в Microsoft Windows NT, NFS,
FTP, входящие в стек TCP/IP.

Протокол прикладного уровня (англ. Application layer) — протокол верхнего (7-го) 
уровня сетевой модели OSI, обеспечивает взаимодействие сети и пользователя. Уровень 
разрешает приложениям пользователя иметь доступ к сетевым службам, таким, как 
обработчик запросов к базам данных, доступ к файлам, пересылке электронной почты. Также
отвечает за передачу служебной информации, предоставляет приложениям информацию об 
ошибках и формирует запросы к уровню представления. Пример: HTTP, POP3, SMTP.


# **Сетезависимые и сетенезависимые уровни**

Функции всех уровней модели OSI могут быть отнесены к одной из двух групп:
либо к функциям, зависящим от конкретной технической реализации сети, либо к
функциям, ориентированным на работу с приложениями.

![](image023.jpg)
<!-- width="453" height="388]{ -->
<i style="color: red">Три нижних уровня — физический, канальный и сетевой — являются
сетезависимыми</i>, то есть протоколы этих уровней тесно связаны с технической
реализацией сети и используемым коммуникационным оборудованием. Например,
переход на оборудование FDDI означает полную смену протоколов физического и
канального уровней во всех узлах сети.
<i style="color: red">Три верхних уровня — прикладной, представительный и сеансовый —
ориентированы на приложения и мало зависят от технических особенностей построения
сети.</i> На протоколы этих уровней не влияют какие бы то ни было изменения в топологии
сети, замена оборудования или переход на другую сетевую технологию.
<i style="color: red">Транспортный уровень является промежуточным, он скрывает все детали
функционирования нижних уровней от верхних.</i> Это позволяет разрабатывать
приложения, не зависящие от технических средств непосредственной транспортировки
сообщений. На рис. 1.23 показаны уровни модели OSI, на которых работают различные
элементы сети.

Компьютер с установленной на нем сетевой ОС взаимодействует с другим
компьютером с помощью протоколов всех семи уровней. Это взаимодействие
компьютеры осуществляют опосредовано через различные коммуникационные
устройства: концентраторы, модемы, мосты, коммутаторы, маршрутизаторы,
мультиплексоры. В зависимости от типа коммуникационное устройство может работать
либо только на физическом уровне (повторитель), либо на физическом и канальном
(мост), либо на физическом, канальном и сетевом, иногда захватывая и транспортный уровень (маршрутизатор). На рис. 1.24 показано соответствие функций различных коммуникационных устройств уровням модели OSI.

![](image024.jpg)
<!-- width="507" height="382 -->

Модель OSI представляет хотя и очень важную, но только одну из многих моделей
коммуникаций. Эти модели и связанные с ними стеки протоколов могут отличаться
количеством уровней, их функциями, форматами сообщений, службами,
поддерживаемыми на верхних уровнях, и прочими параметрами.